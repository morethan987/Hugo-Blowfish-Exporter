/* ========== Markdown HTML Base (WeChat-safe v2) ========== */
:root {
  --md-font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei";
  --md-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  --md-fg: #1f2328;
  --md-fg-muted: #5a6169;
  --md-bg: #ffffff;
  --md-border: #e6e8eb;
  --md-accent: #2f81f7;

  --md-code-bg: #0b0c10;
  --md-code-fg: #e6edf3;
  --md-inline-code-bg: #eaf5ff;

  --md-radius: 12px;
  --md-shadow: 0 6px 18px rgba(0,0,0,.06);
  --md-maxw: 72ch;
}

/* 容器 */
.md-doc{
  color: var(--md-fg);
  background: var(--md-bg);
  font-family: var(--md-font-sans);
  line-height: 1.65;
  font-size: 16px;
  max-width: var(--md-maxw);
  margin: 0 auto;
  padding: 2rem 1rem;
}

.md-doc {
  --co-accent: hsl(209 60% 48%);  /* 类型主色（标题/图标/边条） */
  --co-bg: hsl(209 25% 96%);
  --co-text: rgba(0,0,0,.78);
  --co-left: 4px;
  --co-radius: 10px;
  --co-gap: .6em;
  --co-font: Optima-Regular, Optima, "PingFang SC", Cambria, Georgia, Times, "Times New Roman", serif;
}

/* 标题 */
.md-doc h1,.md-doc h2,.md-doc h3,.md-doc h4,.md-doc h5,.md-doc h6{
  line-height:1.25;
  font-weight:800;
  margin:2rem 0 .75rem;
  color: var(--md-title, #111111);
  word-break: break-word;
}

/* ========= H1：渐变下划强调 ========= */
.md-doc h1{
  font-size: 2rem;          /* ~32px */
  position: relative;
  padding-bottom: .5rem;
}
.md-doc h1::after{
  content:"";
  display:block;
  margin-top:.5rem;
  width:72px; height:6px;
  border-radius:3px;
  background: linear-gradient(90deg,
              var(--md-accent, #0F4C81),
              var(--md-accent-2, #7C3AED));
  /* 细微浮雕质感（兼容差时也不影响） */
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}

/* ========= H2：左侧色带 + 底部分隔 ========= */
.md-doc h2{
  font-size:1.6rem;         /* ~25.6px */
  position: relative;
  padding:.2rem 0 .5rem 1rem;   /* 留出左侧色带空间 */
  border-bottom:1px solid var(--md-border, rgba(0,0,0,.08));
}
.md-doc h2::before{
  content:"";
  position:absolute;
  left:0; top:.15rem; bottom:.6rem;
  width:6px; border-radius:3px;
  background: linear-gradient(180deg,
              var(--md-accent, #0F4C81),
              var(--md-accent-2, #7C3AED));
}

/* ========= H3：圆点领航符 ========= */
.md-doc h3{
  font-size:1.3rem;         /* ~20.8px */
  position:relative;
  padding-left:1rem;
}
.md-doc h3::before{
  content:"";
  position:absolute;
  left:0; top:.6em;
  width:.5rem; height:.5rem;
  border-radius:50%;
  background: var(--md-accent, #0F4C81);
  transform: translateY(-50%);
}

/* ========= H4：浅底胶囊（整段可换行） ========= */
.md-doc h4{
  font-size:1.1rem;         /* ~17.6px */
  display:block;     /* 长标题换行也能保持块状背景 */
  padding:.15rem .6rem;
  border:1px solid var(--md-border, rgba(0,0,0,.08));
  border-radius:999px;
  background: linear-gradient(90deg, #fafafa, #ffffff);
  font-weight:700;
}

/* ========= H5/H6：次级、静音色 + 上间距更紧凑 ========= */
.md-doc h5,.md-doc h6{
  font-size:1rem;
  color: var(--md-fg-muted, #667085);
  letter-spacing:.02em;
  text-transform:none;      /* 如需全大写可设 uppercase */
  margin-top:1.25rem;
}

/* 段落/分隔线 */
.md-doc p{margin:0 0 1rem;}
.md-doc hr{border:0; height:1px; background: var(--md-border); margin:1.5rem 0;}

/* 列表 */
.md-doc ul,.md-doc ol{padding-left:1.5em; margin:0 0 1rem;}
.md-doc li{margin:.25rem 0;}

/* 链接与内联强调 */
.md-doc a{color:var(--md-accent); text-decoration:none;}
.md-doc a:hover{text-decoration:underline;}
.md-doc code{font-family:var(--md-font-mono); font-size:.95em; background:var(--md-inline-code-bg); padding:.15em .35em; border-radius:6px;}
.md-doc mark{background:#fff6a6;}
.md-doc s{opacity:.85; text-decoration:line-through;}
.md-doc strong{font-weight:700;}
.md-doc em{font-style:italic;}

/* 引用（朴素，公众号友好） */
.md-doc blockquote{
  margin:1.2rem 0;
  padding:.9rem 1rem;
  border-left:6px solid #cfe1ff;
  background:#f7faff;
  border-radius: var(--md-radius);
  box-shadow: var(--md-shadow);
}

/* 代码块 */
/* 代码块容器 */
.md-doc pre.codebox {
  background: #0d1117;
  color: #c9d1d9;
  border-radius: 8px;
  overflow-x: auto;
  box-shadow: inset 0 0 10px rgba(0,0,0,.05);
  padding: 0 !important;
  line-height: 0.3;
}

/* 顶部装饰栏 */
.md-doc pre.codebox > .mac {
  display: flex;
  padding: 10px 14px 0;
}
.md-doc pre.codebox > .mac svg {
  width: 45px;
  height: 13px;
}

/* Prism 基础样式 */
.md-doc pre.codebox > code {
  display: block;
  padding: .5em 1em 1em;
  white-space: pre;
  background: transparent;
  color: #c9d1d9;
  font-family: "Fira Code", Menlo, Consolas, Monaco, monospace;
  font-size: 12.5px;
  line-height: 1.75;
  text-align: left;
}

/* Prism token 配色 */
.md-doc .token.comment,
.md-doc .token.prolog,
.md-doc .token.doctype,
.md-doc .token.cdata { color: #8b949e; font-style: italic; }

.md-doc .token.keyword,
.md-doc .token.boolean,
.md-doc .token.constant,
.md-doc .token.atrule { color: #ff7b72; }

.md-doc .token.function,
.md-doc .token.class-name,
.md-doc .token.selector,
.md-doc .token.property { color: #d2a8ff; }

.md-doc .token.attr-name,
.md-doc .token.attr-value,
.md-doc .token.tag,
.md-doc .token.namespace,
.md-doc .token.punctuation,
.md-doc .token.operator { color: #79c0ff; }

.md-doc .token.string,
.md-doc .token.char,
.md-doc .token.builtin { color: #a5d6ff; }

.md-doc .token.number,
.md-doc .token.symbol,
.md-doc .token.regex,
.md-doc .token.variable { color: #ffa657; }

.md-doc .token.inserted { color: #3fb950; }
.md-doc .token.deleted  { color: #f85149; }

/* 内联代码块 */
.md-doc .inline-code {
  font-family: var(--md-font-mono);
  font-size: .95em;
  background: var(--md-inline-code-bg);
  padding: .15em .35em;
  border-radius: 6px;
  vertical-align:middle;
}

/* 数学 */
/* Inline math: 与文本同行、可横向滚动保护、对齐基线 */
.md-doc .math-inline{
  display:inline-flex;
  vertical-align:middle;     /* 让公式与文字中线对齐 */
  line-height:1;             /* 避免额外空隙 */
  max-width:100%;
  overflow-x:auto;           /* 长公式不挤爆布局 */
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  padding-bottom:2px;        /* 与文本下缘留一点点呼吸 */
  color:inherit;             /* 继承文字颜色，实现主题一致 */
}
.md-doc .math-inline > svg{
  display:inline;            /* 保持内联表现 */
  height:1.1em;              /* 尺度接近文字大小，可按需微调 */
  width:auto;
  flex-shrink:0;
}

/* Block math: 居中展示、上下留白、可横向滚动 */
.md-doc .math-block{
  display:block;
  text-align:center;
  max-width:100%;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  padding:0.5em 0;
  margin:0.5em 0;
  color:inherit;
}
.md-doc .math-block > svg{
  display:inline-block;
  height:2.2ex;              /* 与常见渲染保持相近视觉高度 */
  width:auto;
  max-width:300vw;           /* 允许在容器内横向滚动 */
  flex-shrink:0;
}

/* 让 SVG 走当前文本色（与深浅色主题兼容） */
.md-doc .math-inline svg, .md-doc .math-block svg{
  fill:currentColor;
  stroke:currentColor;
}


/* 表格（去 sticky / 高级特性） */
.md-doc .table-wrap{overflow-x:auto; border:1px solid var(--md-border); border-radius: var(--md-radius); box-shadow: var(--md-shadow);}
.md-doc table{width:100%; border-collapse:separate; border-spacing:0; min-width:560px;}
.md-doc thead th{
  text-align:left; background:#f3f4f6; padding:.6rem .8rem; border-bottom:1px solid var(--md-border); font-weight:700;
}
.md-doc tbody td{padding:.6rem .8rem; border-top:1px solid var(--md-border);}
.md-doc tbody tr:nth-child(odd){background:#fafbfc;}

/* 图片/嵌入 */
.md-doc figure{margin:1.2rem 0;}
.md-doc img{
  max-width:85%;
  height:auto;
  border-radius:10px;
  box-shadow: var(--md-shadow);
  display: block;         /* 确保图片是块级元素 */
  margin: 0 auto;         /* 水平居中 */
}
.md-doc figure>figcaption{color:var(--md-fg-muted); font-size:.9em; text-align:center; margin-top:.5rem;}
.md-doc .embed{border:1px dashed var(--md-border); padding:.8rem 1rem; border-radius: var(--md-radius);}

/* 脚注 */
.md-doc .footnote-ref{vertical-align:super; font-size:.8em;}
.md-doc .footnotes{margin-top:2rem; padding-top:1rem; border-top:1px dashed var(--md-border); color:var(--md-fg-muted); font-size:.95em;}

/* Front-matter（可改为 display:none 隐藏） */
.md-doc .frontmatter{
  margin:1rem 0 1.5rem;
  padding:.8rem 1rem;
  background:#f6f8fa;
  border:1px solid var(--md-border);
  border-radius: var(--md-radius);
  font-family:var(--md-font-mono);
  white-space:pre-wrap;
}

/* callout基础外观 */
/* 容器 */
.md-doc blockquote.callout{
  margin:0 0 1em;
  padding:1em;
  background:#f7f7f7;
  color:rgba(0,0,0,.82);
  border:0;
  border-left:4px solid #0F4C81;
  border-radius:10px;
  line-height:1.75;
  font-size:14px;
  text-align:left;
  font-family:Optima-Regular,Optima,'PingFang SC',Cambria,Georgia,Times,'Times New Roman',serif;
}

/* 标题行（用 p，不用 div） */
.md-doc blockquote.callout .callout-title{
  display:flex;
  align-items:center;
  gap:.6em;
  margin:0 0 .5em;
  font-weight:600;
  color:#0F4C81; /* 默认标题色（note） */
}

/* 图标尺寸锁定；svg 继承标题色 */
.md-doc blockquote.callout .callout-icon{
  width:1.1em;
  height:1.1em;
  display:inline-block;
  line-height:1;
  color:inherit;
  flex:0 0 auto;
}
.md-doc blockquote.callout .callout-icon svg {
  display: block;
  width: 1.1em;
  height: 1.1em;
  stroke: currentColor;   /* 线框图标用 */
}


/* 正文 */
.md-doc blockquote.callout .callout-body{ margin:0; }
.md-doc blockquote.callout .callout-body > :first-child{ margin-top:0; }
.md-doc blockquote.callout .callout-body > :last-child{ margin-bottom:0; }
.md-doc blockquote.callout ul{ margin:.4em 0; padding-left:1.3em; }

/* —— 类型配色（直接写颜色，juice 会内联到元素上） —— */
.md-doc blockquote.callout.is-note{
  background:#eaf6ff; border-left-color:#2a7bd1;
}
.md-doc blockquote.callout.is-note .callout-title{ color:#2a7bd1; }

.md-doc blockquote.callout.is-info{
  background:#eaf6ff; border-left-color:#2a7bd1;
}
.md-doc blockquote.callout.is-info .callout-title{ color:#2a7bd1; }

.md-doc blockquote.callout.is-todo{
  background:#eaf6ff; border-left-color:#2a7bd1;
}
.md-doc blockquote.callout.is-todo .callout-title{ color:#2a7bd1; }

.md-doc blockquote.callout.is-tip{
  background:#ebf8f2; border-left-color:#2d8a5f;
}
.md-doc blockquote.callout.is-tip .callout-title{ color:#2d8a5f; }

.md-doc blockquote.callout.is-success{
  background:#ebf8f2; border-left-color:#2d8a5f;
}
.md-doc blockquote.callout.is-success .callout-title{ color:#2d8a5f; }

.md-doc blockquote.callout.is-warning{
  background:#fff8e6; border-left-color:#d48806;
}
.md-doc blockquote.callout.is-warning .callout-title{ color:#d48806; }

.md-doc blockquote.callout.is-question{
  background:#fff8e6; border-left-color:#d48806;
}
.md-doc blockquote.callout.is-question .callout-title{ color:#d48806; }

.md-doc blockquote.callout.is-danger{
  background:#fff1f0; border-left-color:#cf1322;
}
.md-doc blockquote.callout.is-danger .callout-title{ color:#cf1322; }

.md-doc blockquote.callout.is-example{
  background:#ffe7ff; border-left-color:#b25eb2;
}
.md-doc blockquote.callout.is-example .callout-title{ color:#b25eb2; }
